title: "GCP„ÅÆRegionÈñì„É¨„Ç§„ÉÜ„É≥„Ç∑„Åã„Çâ„Çµ„Éº„Éì„Çπ„ÅÆRegionÈõÜÁ¥Ñ„ÇíËÄÉÂØü„Åô„Çã"
date: 2020/08/13 00:00:00
postid: ""
tag:
  - GCP
  - Network
  - Â§è‰ºë„ÅøËá™Áî±Á†îÁ©∂
  - Terraform
category:
  - Infrastructure
thumbnail: /images/20200813/thumbnail.png
author: Ë•øÁî∞Â•ΩÂ≠ù
featured: false
lede: "„Éï„É•„Éº„ÉÅ„É£„ÉºÂ§è‰ºë„Åø„ÅÆËá™Áî±Á†îÁ©∂ÈÄ£Ëºâ„ÅÆ9ÂõûÁõÆ„Åß„Åô„ÄÇ„Åì„Çì„Å´„Å°„ÅØ„ÄÅTIG DX„É¶„Éã„ÉÉ„Éà„ÅÆË•øÁî∞„Å®Áî≥„Åó„Åæ„Åô„ÄÇÊ•≠Âãô„Åß„ÅØ `GCP` „ÅÆ„Ç§„É≥„Éï„É©„ÅÆË®≠Ë®à/ÊßãÁØâ/ÈÅãÁî®„ÇíÊãÖÂΩì„Åó„Å¶„Åä„Çä„Åæ„Åô„ÄÇÁßÅ„ÅØÂâçËÅ∑„Åß„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØÈ†òÂüü„ÅÆ„Ç≠„É£„É™„Ç¢„ÅåÈï∑„Åã„Å£„Åü‰∫ã„ÇÇ„ÅÇ„Çä„ÄÅÁèæËÅ∑„Åß„ÅØ `GCP` „ÅÆ‰∏≠„Åß„ÇÇÁâπ„Å´„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ„Å´Èñ¢„Åô„ÇãÈÉ®ÂàÜ„ÇíË¶ã„Å¶„ÅÑ„Åæ„Åô„ÄÇ‰ªäÂõû„ÅÆËá™Áî±Á†îÁ©∂„ÇÇ„Åù„Çå„Å´Èñ¢ÈÄ£„Åô„ÇãËÄÉÂØü„Çí„Åó„Å¶„ÅÑ„Åç„Åæ„Åô„ÄÇ„ÇØ„É©„Ç¶„Éâ‰∏ä„Åß„ÄÅ„ÉØ„Éº„É´„Éâ„ÉØ„Ç§„Éâ„ÅÆ„Çµ„Éº„Éì„Çπ„Çí‰Ωú„Çã„Å®„Åç„ÄÅ„Äé„Å©„Çå„Åè„Çâ„ÅÑ„ÅÆÂØÜÂ∫¶„Åß„Å©„ÅÆ Region „Å´„Çµ„Éº„Éê„ÇíÁ´ã„Å¶„Çå„Å∞„Çà„ÅÑ„ÅÆ„ÅãÔºü„Äè„Å£„Å¶„ÄÅÊÇ©„Åø„Åæ„Åõ„Çì„ÅãÔºü„Ç§„É≥„Çø„Éº„Éç„ÉÉ„ÉàÂêë„Åë„ÅÆWeb„Çµ„Éº„Éì„Çπ„Å†„Å£„Åü„Çâ `CDN` „ÅßÂØæÂá¶„Åô„Çå„Å∞Âü∫Êú¨ÁöÑ„Å´„ÅØOK„Åß„Åô„Åå„ÄÅ„Ç§„É≥„Éà„É©„Éç„ÉÉ„Éà„Å†„Åë„Åã„Çâ„Ç¢„ÇØ„Çª„Çπ„Åï„Åõ„Åü„ÅÑÁ§æÂÜÖ„Çµ„Éº„Éì„Çπ„ÄÅBackend Á≥ª„ÅÆ„Çµ„Éº„Éì„Çπ„ÄÅWeb„Çµ„Éº„Éì„Çπ„Åß„ÅØ„Å™„ÅÑ„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„Å™„Å©„ÅØ„Ç§„É≥„Çπ„Çø„É≥„Çπ„ÇíÁî®ÊÑè„Åô„ÇãÂøÖË¶Å„ÅåÂá∫„Å¶„Åç„Åæ„Åô„Çà„Å≠„ÄÇ"
---

[„Éï„É•„Éº„ÉÅ„É£„ÉºÂ§è‰ºë„ÅøËá™Áî±Á†îÁ©∂ÈÄ£Ëºâ](https://future-architect.github.io/articles/20200726/)„ÅÆ9ÂõûÁõÆ„Åß„Åô„ÄÇ

# „ÅØ„Åò„ÇÅ„Å´

„Åì„Çì„Å´„Å°„ÅØ„ÄÅTIG DX„É¶„Éã„ÉÉ„Éà„ÅÆË•øÁî∞„Å®Áî≥„Åó„Åæ„Åô„ÄÇ

Ê•≠Âãô„Åß„ÅØ `GCP` „ÅÆ„Ç§„É≥„Éï„É©„ÅÆË®≠Ë®à/ÊßãÁØâ/ÈÅãÁî®„ÇíÊãÖÂΩì„Åó„Å¶„Åä„Çä„Åæ„Åô„ÄÇÁßÅ„ÅØÂâçËÅ∑„Åß„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØÈ†òÂüü„ÅÆ„Ç≠„É£„É™„Ç¢„ÅåÈï∑„Åã„Å£„Åü‰∫ã„ÇÇ„ÅÇ„Çä„ÄÅÁèæËÅ∑„Åß„ÅØ `GCP` „ÅÆ‰∏≠„Åß„ÇÇÁâπ„Å´„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ„Å´Èñ¢„Åô„ÇãÈÉ®ÂàÜ„ÇíË¶ã„Å¶„ÅÑ„Åæ„Åô„ÄÇ‰ªäÂõû„ÅÆËá™Áî±Á†îÁ©∂„ÇÇ„Åù„Çå„Å´Èñ¢ÈÄ£„Åô„ÇãËÄÉÂØü„Çí„Åó„Å¶„ÅÑ„Åç„Åæ„Åô„ÄÇ

# Ë®ò‰∫ã„Å´„Å§„ÅÑ„Å¶

„ÇØ„É©„Ç¶„Éâ‰∏ä„Åß„ÄÅ„ÉØ„Éº„É´„Éâ„ÉØ„Ç§„Éâ„ÅÆ„Çµ„Éº„Éì„Çπ„Çí‰Ωú„Çã„Å®„Åç„ÄÅ**„Äé„Å©„Çå„Åè„Çâ„ÅÑ„ÅÆÂØÜÂ∫¶„Åß„Å©„ÅÆ Region „Å´„Çµ„Éº„Éê„ÇíÁ´ã„Å¶„Çå„Å∞„Çà„ÅÑ„ÅÆ„ÅãÔºü„Äè**„Å£„Å¶„ÄÅÊÇ©„Åø„Åæ„Åõ„Çì„ÅãÔºü„Ç§„É≥„Çø„Éº„Éç„ÉÉ„ÉàÂêë„Åë„ÅÆWeb„Çµ„Éº„Éì„Çπ„Å†„Å£„Åü„Çâ `CDN` „ÅßÂØæÂá¶„Åô„Çå„Å∞Âü∫Êú¨ÁöÑ„Å´„ÅØOK„Åß„Åô„Åå„ÄÅ„Ç§„É≥„Éà„É©„Éç„ÉÉ„Éà„Å†„Åë„Åã„Çâ„Ç¢„ÇØ„Çª„Çπ„Åï„Åõ„Åü„ÅÑÁ§æÂÜÖ„Çµ„Éº„Éì„Çπ„ÄÅBackend Á≥ª„ÅÆ„Çµ„Éº„Éì„Çπ„ÄÅWeb„Çµ„Éº„Éì„Çπ„Åß„ÅØ„Å™„ÅÑ„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„Å™„Å©„ÅØ„Ç§„É≥„Çπ„Çø„É≥„Çπ„ÇíÁî®ÊÑè„Åô„ÇãÂøÖË¶Å„ÅåÂá∫„Å¶„Åç„Åæ„Åô„Çà„Å≠„ÄÇ
ÈÅ∏ÊäûËÇ¢„Å®„Åó„Å¶„ÅØ‰ª•‰∏ã„Åß„Åô„ÄÇ

- ÂÖ®„É™„Éº„Ç∏„Éß„É≥„Å´„Çµ„Éº„Éê„ÇíÊßãÁØâ„Åô„Çã
    - Êó•Êú¨„ÅÆÂ†¥Âêà„ÄÅÊù±‰∫¨„ÄÅÂ§ßÈò™„Å´„Åù„Çå„Åû„ÇåÊßãÁØâ„Åô„Çã
- ËøëÂÇç„ÅÆÂõΩ„Çí1„Å§„ÅÆ„É™„Éº„Ç∏„Éß„É≥„Å´„Åæ„Å®„ÇÅ„Çã
    - Êó•Êú¨„ÅÆÂ†¥Âêà„ÄÅÊù±‰∫¨„Å†„Åë„Å´ÈõÜÁ¥Ñ„Åô„Çã

‰ªäÂõû„ÅØ„ÄÅËá™Áî±Á†îÁ©∂„Å®„ÅÑ„ÅÜ‰∫ã„Åß„ÄÅÊó•È†ÉÊ•≠Âãô„Åß‰Ωø„Å£„Å¶„ÅÑ„Çã `GCP` „ÇíÈ°åÊùê„Å´„Åó„Å¶„ÄÅ„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ„ÅÆË¶≥ÁÇπ„Åã„ÇâËÄÉÂØü„Åó„Å¶„Åø„Çà„ÅÜ„Å®ÊÄù„ÅÑ„Åæ„Åô„ÄÇÂÖà„Å´Áî≥„Åó‰∏ä„Åí„Å¶„Åä„Åç„Åæ„Åô„Å®„ÄÅ‰∏ÄË¶≥ÁÇπ„Åã„Çâ„ÅÆËÄÉÂØü„Å™„ÅÆ„Åß„ÄÅÂÆüÈöõ„ÅÆ„Çµ„Éº„Éì„Çπ„ÅåÊèê‰æõ„Åó„Å¶„ÅÑ„ÇãSLA„Å´„Éû„ÉÉ„ÉÅ„Åô„Çã„Åã„Å©„ÅÜ„Åã„ÅØÂà•ÂïèÈ°å„Å™„ÅÆ„Åß„ÄÅ„Åù„Åì„ÅØ„ÅîÂÆπËµ¶„Åè„Å†„Åï„ÅÑüôá‚Äç‚ôÇÔ∏è

# Ëá™Áî±Á†îÁ©∂„ÅßËÄÉÂØü„Åô„ÇãË¶≥ÁÇπ

„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ„ÅÆË¶≥ÁÇπ„Å®Ë®Ä„Å£„Å¶„ÇÇ„ÄÅ„ÅÑ„Åè„Å§„Åã„ÅÇ„Çä„Åæ„Åô„Çà„Å≠„ÄÇ

- „Çπ„É´„Éº„Éó„ÉÉ„ÉàÔºö`„ÄáGbps` „Å™„Å©„ÅÆÂ∏ØÂüü„ÅÆË©±„ÄÇ„Äé„ÇÆ„Ç¨„Åå„Å™„Åè„Å™„Å£„Åü„Äè„Å®„Åã„ÅÆ„ÇÆ„Ç¨„Å®„ÅØÂ∞ë„ÅóÈÅï„ÅÑ„Åæ„Åô„ÄÇ
- „É¨„Ç§„ÉÜ„É≥„Ç∑Ôºö„Éë„Ç±„ÉÉ„Éà„ÅÆÂæÄÂæ©„ÅÆÊôÇÈñì
- „Ç∏„ÉÉ„Çø„ÉºÔºö‰∏äË®ò„ÅÆÊôÇÈñì„ÅÆÊè∫„Çâ„Åé„ÄÇÊó©„ÅÑ„Å®„Åç„Å®ÈÅÖ„ÅÑ„Å®„Åç„ÅÆ„Å∞„Çâ„Å§„ÅçÂ∫¶Âêà„ÅÑ

‰ªäÂõû„ÅØ„ÄÅ„Åì„ÅÆ‰∏≠„Åß„É¨„Ç§„ÉÜ„É≥„Ç∑„Å†„Åë„Å´Ê≥®ÁõÆ„Åó„Å¶ËÄÉÂØü„Åó„Åæ„Åô„ÄÇ
Ôºà„Éá„Éº„ÇøÈáè„Åå„Åù„Åì„Åù„Åì„ÅÇ„Çã„Çµ„Éº„Éì„Çπ„ÅÆÂ†¥Âêà„ÅØ„Çπ„É´„Éº„Éó„ÉÉ„Éà„ÇÇÊ∞ó„Å´„Åô„Çã„Åπ„Åç„Åß„Åô„Åå„ÄÅÊú¨Ë®ò‰∫ã„Åß„ÅØ„É¨„Ç§„ÉÜ„É≥„Ç∑„ÅÆ„Åø„Å´Ê≥®ÁõÆÔºâ

# GCP „ÅÆ„É™„Éº„Ç∏„Éß„É≥„Å®„ÅØÔºü

„Åì„Å°„Çâ„Å´‰∏ñÁïåÂú∞Âõ≥„Å®„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ„Ç±„Éº„Éñ„É´„ÅÆÊ¶ÇË¶Å„ÅåÊé≤Ëºâ„Åï„Çå„Å¶„Åä„Çä„Åæ„Åô„ÄÇ
https://cloud.google.com/about/locations?hl=ja#network
„Åì„ÅÆÁ∑ö„ÇíÈÄö„Å£„Å¶„Éë„Ç±„ÉÉ„Éà„Åå„ÇÑ„ÇäÂèñ„Çä„Åï„Çå„Çã„Çè„Åë„Åß„Åô„Åå„ÄÅËøë„ÅÑ„Å®„Åì„Çç„ÅØÊó©„ÅèÂøúÁ≠î„ÅåËøî„Å£„Å¶„Åè„Çã„Åó„ÄÅÈÅ†„ÅÑ„Å®„Åì„Çç„ÅØÂøúÁ≠î„ÅåÈÅÖ„ÅÑ„Å®„ÅÑ„ÅÜ‰∫ã„Åß„Åô„ÄÇ
„Åß„ÅØ„ÄÅ„Çµ„Éº„Éì„ÇπÁõÆÁ∑ö„ÅßË®Ä„ÅÜ„Å®„ÄÅ„Å©„Çå„Åè„Çâ„ÅÑÈõÜÁ¥Ñ„Åß„Åç„Çã„Çì„Åß„Åó„Çá„ÅÜ„Åã„Å≠Ôºü

# ÈõÜÁ¥Ñ„Åô„ÇãÂü∫Ê∫ñ

„Åæ„Åö„ÄÅÈõÜÁ¥Ñ„Åô„ÇãÂü∫Ê∫ñ„ÇíÊ±∫„ÇÅ„Å¶„Åä„Åç„Åæ„Åô„ÄÇ
„Åã„Å™„ÇäÊÑüË¶öË´ñ„Åß„Åô„Åó„ÄÅ„Çµ„Éº„Éì„Çπ„ÅÆÁ®ÆÈ°û„ÇÑ‰Ωú„Çä„Å´„ÇÇÂΩìÁÑ∂‰æùÂ≠ò„Åó„Åæ„Åô„Åå„ÄÅÂ§ß‰ΩìÁßÅ„ÅÆÁµåÈ®ì‰∏ä„ÅØ„Åì„Çå„Åè„Çâ„ÅÑ„Åß„Åô„ÄÇ

|„É¨„Ç§„ÉÜ„É≥„Ç∑|Êó•Â∏∏‰ΩøÁî®„ÅßÂêåÁ®ãÂ∫¶„Å™„É¢„Éé|‰ΩìÊÑü|
|:--|:--|:--|
|20ms ‰ª•‰∏ã|Âõ∫ÂÆö„ÅÆÂÖâÂõûÁ∑ö|„Å®„Å¶„ÇÇÈÄü„ÅÑ„ÄÇ„Åï„Åè„Åï„Åè|
|60ms ‰ª•‰∏ã|„Çπ„Éû„Éõ4G„Åè„Çâ„ÅÑ|„Åæ„ÅÅ„Åì„Çå„Åè„Çâ„ÅÑ„ÅØÊàëÊÖ¢Âá∫Êù•„Çã|
|„Åù„Çå‰ª•‰∏ä|4G„ÅßÈÅÖ„ÅÑÊôÇ/3GÂà©Áî®„Å™„Å©|„Åì„Çå„ÅØÈÅÖ„ÅÑ‚Ä¶‰Ωø„ÅÑ„Åü„Åè„Å™„ÅÑ|

„Å™„ÅÆ„Åß„ÄÅ**`60ms` „Åæ„Åß„ÅØÈõÜÁ¥ÑÂèØËÉΩ**„Å®Âà§Êñ≠„Åô„Çã‰∫ã„Å´„Åó„Åæ„Åô„ÄÇ
‚ÄªÈáç„Å≠„Å¶„Å´„Å™„Çä„Åæ„Åô„Åå„ÄÅÊèê‰æõ„Åô„Çã„Çµ„Éº„Éì„Çπ„ÅÆÁ®ÆÈ°û/‰Ωú„Çä„Å´„Åì„ÅÆÂü∫Ê∫ñ„ÅØÂ§ß„Åç„Åè‰æùÂ≠ò„Åó„Åæ„Åô„ÄÇÈü≥Â£∞Á≥ª„ÉªÊò†ÂÉèÁ≥ª„Å†„Å®ÈÅÖ„ÅÑ„Å®Ëá¥ÂëΩÁöÑ„Å™ÂΩ±Èüø„ÇíÂèó„Åë„Åæ„Åô„Åå„ÄÅ„Éï„Ç°„Ç§„É´„Çµ„Éº„Éê„ÅÆÊßò„Å™„Çµ„Éº„Éì„Çπ„Å†„Å®„ÇÇ„ÅÜÂ∞ë„ÅóÂü∫Ê∫ñ„Çí‰∏ã„Åí„Çâ„Çå„Çã„ÄÅ„Å™„Å©„ÅØ„ÅÇ„ÇäÂæó„Åæ„Åô„ÄÇ

# GCP „ÅÆÂÖ® Region Èñì„ÅÆ„É¨„Ç§„ÉÜ„É≥„Ç∑„ÇíË®àÊ∏¨„Åô„Çã
### Ë®àÊ∏¨ÂØæË±°

„Åì„Å°„Çâ„ÅÆ [Compute Engine „É™„Éº„Ç∏„Éß„É≥„Å®„Çæ„Éº„É≥](https://cloud.google.com/compute/docs/regions-zones?hl=ja) „Å´Ë®òËºâ„ÅÆÂÖ®Region „ÇíÂØæË±°„Å´„Åó„Åæ„Åô„ÄÇ
‚Äª„Åô„ÅÑ„Åæ„Åõ„Çì„ÄÅ„É†„É≥„Éê„Ç§„Å†„Åë„ÄÅQuota„Åå„Éá„Éï„Ç©„É´„Éà„ÅßCPUS:0„Å®„Å™„Å£„Å¶„Åä„Çä„ÄÅ‰∏ä„Åí„Çã„É™„ÇØ„Ç®„Çπ„Éà„ÇíÂá∫„Åó„Åü„Çì„Åß„Åô„Åå„ÄÅÊãíÂê¶„Åï„Çå„Å¶„Åó„Åæ„ÅÑ„Åæ„Åó„Åü„ÄÇ„Åù„ÅÆÈñ¢‰øÇ„Åß„ÄÅ„É†„É≥„Éê„Ç§„Å†„ÅëË®àÊ∏¨„ÅåÂá∫Êù•„Åæ„Åõ„Çì„Åß„Åó„Åüüôá‚Äç‚ôÇÔ∏è
![](/images/20200813/2020-08-02_233921.png)

### 

- „Éï„É´„É°„ÉÉ„Ç∑„É•„ÅßË®àÊ∏¨
- Ping „Çí 100ms ÊØé„Å´ 100 ÂõûÊâì„Å£„Å¶„ÄÅ„Åù„ÅÆËøîÁ≠î„ÅÆÂπ≥ÂùáÂÄ§

‚Äª„Ç§„É≥„Çπ„Çø„É≥„ÇπÊßãÁØâ„ÅÆ„Åü„ÇÅ„ÅÆ `Terraform` „Ç≥„Éº„Éâ„ÄÅË®àÊ∏¨„ÅÆ„Åü„ÇÅ„ÅÆ„Çπ„ÇØ„É™„Éó„Éà„ÅØAppendix„Å´Ëºâ„Åõ„Å¶„Åä„Åç„Åæ„Åô„ÄÇ
„ÄÄ„Çπ„ÇØ„É™„Éó„Éà„ÅØ‰∏¶ÂàóÂá¶ÁêÜ„Çí„Åô„Çã„Åπ„Åç„Åß„Åó„Åü„ÄÇ„Åù„Åì„ÅØ„Å°„Çá„Å£„Å®‰Ωú„ÇäË∂≥„Çä„Å™„ÅÑÊÑü„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ

### Ë®àÊ∏¨ÁµêÊûú

Ë®àÊ∏¨ÁµêÊûú„ÅØ‰ª•‰∏ã„Åß„Åô„ÄÇ

- ÈùíÔºö20ms„ÄÇ„Çµ„ÇØ„Çµ„ÇØ
- ÈªÑÔºö60ms„ÄÇ„ÇÆ„É™„ÇÆ„É™ÊàëÊÖ¢„Åß„Åç„Çã„É¨„Éô„É´
- Ëµ§Ôºö„Åù„Çå‰ª•‰∏ä„ÄÇ„Åì„Çå„ÅØ„Çµ„Éº„Éì„Çπ„Å®„Åó„Å¶„ÅØ„Çà„Çç„Åó„Åè„Å™„ÅÑ
![](/images/20200813/2020-08-02_231622.jpg)

# ËÄÉÂØü

ËÄÉÂØü„Å´ÂΩì„Åü„Å£„Å¶„ÅØ„ÄÅÂ∞ë„Åó„ÇíÂâçÊèê„ÇíÁΩÆ„Åç„Åæ„Åô„ÄÇ

- ÂØæË±°„Å®„Å™„Çã‰ºÅÊ•≠„ÅØ„ÄÅ„Ç∞„É≠„Éº„Éê„É´Â±ïÈñã„Åó„Å¶„ÅÑ„ÇãÊó•Êú¨‰ºÅÊ•≠Ôºà`Japanese Multinational Corporations`Ôºâ„Åß„ÅÇ„Çä„ÄÅJapan „Å´ Global Headquarters(`GHQ`) „ÅåÂ≠òÂú®„Åô„Çã„ÄÇ
    - ‰∫∫Êï∞ÁöÑ„Å´„ÅØ„ÄÅJapan „ÅåÊúÄ„ÇÇÂæìÊ•≠Âì°/È°ßÂÆ¢„ÅåÂ§ö„ÅÑ„ÄÇ
- ÂêÑÂõΩ„ÅÆÊîØÁ§æ/ÊîØÈÉ®„Åå„Ç§„É≥„Éà„É©„Éç„ÉÉ„Éà„ÇíÈÄö„Åò„Å¶Á§æÂÜÖÂêë„Åë„ÅÆ„Çµ„Éº„Éì„Çπ„Å´„Ç¢„ÇØ„Çª„Çπ„Åô„Çã„ÄÇ

Ââ≤„Å®ÁèæÂÆüÁöÑ„Å™ÂâçÊèê„Åß„Åô„Çà„Å≠„ÄÇ„Åù„ÅÆÂâçÊèê„ÇíÂÖÉ„Å´„ÄÅËÄÉ„Åà„Çã„Å®„ÄÅ‰ª•‰∏ã„ÅÆÊßò„Å´„Å™„Çä„Åæ„Åô„ÄÇ

- Êù±‰∫¨ÔºöÊó•Êú¨/ÈüìÂõΩ/Âè∞Êπæ/È¶ôÊ∏Ø„ÇíÈõÜÁ¥ÑÔºàÂè∞Êπæ/È¶ôÊ∏Ø„ÅØ„ÄÅÈ¶ôÊ∏Ø„Å´Âà•„Å†„Åó„Åß„ÇÇËâØ„ÅÑÁßíÊï∞Ôºâ
    - GHQ„Åå„ÅÇ„Çã„ÅÆ„Åß„ÄÅ„Åæ„Åö„ÅØ„Ç≥„Ç≥„ÇíËµ∑ÁÇπ„Å´ËÄÉ„Åà„Åæ„Åô„ÄÇ
- „Ç∑„É≥„Ç¨„Éù„Éº„É´ÔºöÊù±Âçó„Ç¢„Ç∏„Ç¢Âú∞Âüü„Çí„Ç´„Éê„Éº
- „Ç™„Éº„Çπ„Éà„É©„É™„Ç¢Ôºö„Ç™„Çª„Ç¢„Éã„Ç¢Âú∞Âüü„ÄÇ„Ç∑„É≥„Ç¨„Éù„Éº„É´„Åæ„ÅßÁµêÊßãÈÅ†„ÅÑ„Çì„Åß„Åô„Å≠„ÄÇ
- „Éâ„Ç§„ÉÑÔºö„É®„Éº„É≠„ÉÉ„ÉëÂú∞Âüü„ÄÇÔºàÂåóÊ¨ß„Å†„Åë„ÅØÂà•„Å†„Åó„Åß„ÇÇËâØ„ÅÑÁßíÊï∞Ôºâ
- Á±≥ÂõΩ„Ç¢„Ç§„Ç™„ÉØÔºöÂåó„Ç¢„É°„É™„Ç´Âú∞Âüü„ÄÇÔºàÊù±Ë•ø„ÅßÂàÜ„Åë„Å¶„ÇÇËâØ„ÅÑÁßíÊï∞Ôºâ
- „Éñ„É©„Ç∏„É´

„Åæ„ÅÅ„ÄÅ„Å™„Çì„Å¶„ÅÑ„ÅÜ„Åã„ÄÇ„ÄÇ„ÄÇ„Äé„Åæ„ÅÅ„Åù„ÅÜ„Å†„Çà„Å≠„ÄèÊÑü„ÅÆ„ÅÇ„ÇãËÄÉÂØü„Å´„Å™„Çä„Åæ„Åô„Å≠„ÄÇ„ÄÇ„ÄÇ
ÂÆüÈöõ„ÄÅ„Åì„Çå„Åè„Çâ„ÅÑ„Çí„Éô„Éº„Çπ„Å´„É™„Éº„Ç∏„Éß„É≥„ÇíÈõÜÁ¥Ñ„Åó„Å¶„ÅÑ„Çã‰∫ã„ÅåÂ§ö„ÅÑ„Çì„Åò„ÇÉ„Å™„ÅÑ„Åã„Å®ÊÄù„ÅÑ„Åæ„Åô„ÄÇ„Åù„Åì„Å´ÂØæ„Åó„Å¶„ÄÅ„É¨„Ç§„ÉÜ„É≥„Ç∑„Å®„ÅÑ„ÅÜË¶≥ÁÇπ„Åß„ÅÆ‰∏Ä„Å§„ÅÆË£è‰ªò„Åë„Å´„ÅØ„Å™„Å£„Åü„Åã„Å™„Å®ÊÄù„ÅÑ„Åæ„Åô„ÄÇ

# ÁµÇ„Çè„Çä„Å´

‰ªäÂõû„ÅØ„ÄéËá™Áî±Á†îÁ©∂„Äè„Å®„ÅÑ„ÅÜ‰∫ã„Åß„ÄÅÊó•È†É‰Ωø„Å£„Å¶„ÅÑ„Çã„ÉÑ„Éº„É´„Å´Èñ¢„Åó„Å¶„ÄÅÂ∞ë„ÅóÊ∑±Êéò„Å£„Å¶„Åø„Åæ„Åó„Åü„ÄÇ
‰ªñ„Å´„ÇÇ„É´„Éº„ÉÜ„Ç£„É≥„Ç∞„Å´Èñ¢„Åô„ÇãËÄÉÂØü„ÇÑ„ÄÅPeering, HA VPN „ÅÆ‰Ωø„ÅÑÂàÜ„Åë„Å´Èñ¢„Åô„ÇãËÄÉÂØü„ÇÇËá™ÂàÜ„ÅÆ‰∏≠„Åß„ÅØ„ÅÇ„Çã„ÅÆ„Åß„ÄÅ„Å©„Åì„Åã„ÅßÊ∑±Â†Ä„Çä„Åó„Å¶„ÅÑ„Åë„Çå„Å∞„Å®ÊÄù„ÅÑ„Åæ„Åô„ÄÇ

# „Å§„ÅÑ„Åß„Å´(GCP„ÅÆ„Çπ„É´„Éº„Éó„ÉÉ„Éà„Å´„Å§„ÅÑ„Å¶)

ÁêÜË´ñÂÄ§„Å®„ÅÑ„ÅÜ„Åã„ÄÅUDP„Éô„Éº„Çπ„Åß„ÅØ„Åì„ÅÆÊßò„Å´„Å™„Çä„Åæ„Åô„ÄÇ

- „Ç§„É≥„Çπ„Çø„É≥„ÇπÈñì„ÅÆ„Çπ„É´„Éº„Éó„ÉÉ„Éà„ÅØ„ÄÅ`2Gbps/CPU` „Å®„Å™„Çã„ÄÇ‰∏äÈôê„ÅØ 8CPU „ÅÆ `16Gbps`
    - n1-standard-1 : `2 Gbps`
    - n1-standard-4 : `8 Gbps`
    - n1-standard-8 : `16 Gbps`Ôºà‰ª•Èôç„ÄÅCPU„ÇíÂ¢ó„ÇÑ„Åó„Å¶„ÇÇ„Çπ„É´„Éº„Éó„ÉÉ„Éà„ÅØÂ¢ó„Åà„Å™„ÅÑÔºâ

‚ÄªTCP „Éô„Éº„Çπ„Å†„Å®„ÄÅTCP„ÅÆ„Éï„É≠„ÉºÂà∂Âæ°„ÅÆÈñ¢‰øÇ„Åß‰∏äË®ò„Åª„Å©„ÅÆÊï∞ÂÄ§„ÇíÂá∫„Åô„Åü„ÇÅ„Å´„ÅØOS„ÅÆ„Éë„É©„É°„Éº„Çø„ÅÆË™øÊï¥„ÅåÂøÖË¶Å„Å´„Å™„Çä„Åæ„Åô„ÄÇ

# Appendix

## Terraform „Ç≥„Éº„Éâ

```sh gce.tf
resource "google_compute_instance" "GCE_instances" {
  count        = length(local.gce_instances_list)
  name         = local.gce_instances_list[count.index].name
  machine_type = "f1-micro"
  zone         = local.gce_instances_list[count.index].zone
  project      = local.project.id

  boot_disk {
    auto_delete = false
    source      = google_compute_disk.GCE_disks[count.index].self_link
  }

  network_interface {
    network = google_compute_network.test_network.name
    access_config {
      // Ephemeral IP
    }
  }

  service_account {
    email  = google_service_account.nw_tester.email
    scopes = ["cloud-platform"]
  }

  metadata = {
    enable-oslogin = "true"
  }
}

resource "google_compute_disk" "GCE_disks" {
  count   = length(local.gce_instances_list)
  name    = "${local.gce_instances_list[count.index].name}-disk"
  project = local.project.id
  zone    = local.gce_instances_list[count.index].zone
  type    = "pd-standard"
  size    = 20
  image   = "centos-cloud/centos-8"

  lifecycle {
    ignore_changes = [labels]
  }
}
```
```sh network.tf
resource "google_compute_network" "test_network" {
  project                 = local.project.id
  name                    = "test-network"
  auto_create_subnetworks = true
}

resource "google_compute_firewall" "ingress_test_network_iap" {
  project = local.project.id
  name    = "ingress-test-network-iap"
  network = google_compute_network.test_network.self_link

  direction = "INGRESS"
  priority  = 1000

  allow {
    protocol = "tcp"
    ports    = ["22"]
  }

  source_ranges = ["35.235.240.0/20"]
}

resource "google_compute_firewall" "ingress_test_network_internal" {
  project = local.project.id
  name    = "ingress-test-network-internal"
  network = google_compute_network.test_network.self_link

  direction = "INGRESS"
  priority  = 1000

  allow {
    protocol = "all"
  }

  source_ranges = ["10.0.0.0/8", "172.16.0.0/12", "192.168.0.0/16"]
}
```
```sh service_account.tf
resource "google_service_account" "nw_tester" {
  project      = local.project.id
  account_id   = "nw-tester"
  display_name = "nw-tester"
}

resource "google_project_iam_member" "nw_tester" {
  project = local.project.id
  member  = "serviceAccount:${google_service_account.nw_tester.email}"
  role    = "roles/compute.viewer"
}

```
```sh veriable.tf
locals {
  project = {
    id = "project_id"
  }

  // GCE Instances
  gce_instance_name = "instance-test-nsd"
  gce_instances_list = [
    { region = "asia-northeast1", zone = "asia-northeast1-a", name = "${local.gce_instance_name}-asia-northeast1-a" },
    { region = "asia-northeast1", zone = "asia-northeast1-b", name = "${local.gce_instance_name}-asia-northeast1-b" },
    { region = "asia-northeast1", zone = "asia-northeast1-c", name = "${local.gce_instance_name}-asia-northeast1-c" },
    { region = "asia-northeast2", zone = "asia-northeast2-a", name = "${local.gce_instance_name}-asia-northeast2-a" },
    { region = "asia-northeast3", zone = "asia-northeast3-a", name = "${local.gce_instance_name}-asia-northeast3-a" },
    { region = "asia-east1", zone = "asia-east1-b", name = "${local.gce_instance_name}-asia-east1-b" },
    { region = "asia-east2", zone = "asia-east2-a", name = "${local.gce_instance_name}-asia-east2-a" },
//    { region = "asia-south1", zone = "asia-south1-c", name = "${local.gce_instance_name}-asia-south1-c" }, 
    { region = "asia-southeast1", zone = "asia-southeast1-b", name = "${local.gce_instance_name}-asia-southeast1-b" },
    { region = "asia-southeast2", zone = "asia-southeast2-a", name = "${local.gce_instance_name}-asia-southeast2-a" },
    { region = "australia-southeast1", zone = "australia-southeast1-b", name = "${local.gce_instance_name}-australia-southeast1-b" },
    { region = "europe-north1", zone = "europe-north1-a", name = "${local.gce_instance_name}-europe-north1-a" },
    { region = "europe-west1", zone = "europe-west1-b", name = "${local.gce_instance_name}-europe-west1-b" },
    { region = "europe-west2", zone = "europe-west2-c", name = "${local.gce_instance_name}-europe-west2-c" },
    { region = "europe-west3", zone = "europe-west3-c", name = "${local.gce_instance_name}-europe-west3-c" },
    { region = "europe-west4", zone = "europe-west4-a", name = "${local.gce_instance_name}-europe-west4-a" },
    { region = "europe-west6", zone = "europe-west6-a", name = "${local.gce_instance_name}-europe-west6-a" },
    { region = "northamerica-northeast1", zone = "northamerica-northeast1-a", name = "${local.gce_instance_name}-northamerica-northeast1-a" },
    { region = "southamerica-east1", zone = "southamerica-east1-b", name = "${local.gce_instance_name}-southamerica-east1-b" },
    { region = "us-central1", zone = "us-central1-c", name = "${local.gce_instance_name}-us-central1-c" },
    { region = "us-east1", zone = "us-east1-b", name = "${local.gce_instance_name}-us-east1-b" },
    { region = "us-east4", zone = "us-east4-c", name = "${local.gce_instance_name}-us-east4-c" },
    { region = "us-west1", zone = "us-west1-b", name = "${local.gce_instance_name}-us-west1-b" },
    { region = "us-west2", zone = "us-west2-a", name = "${local.gce_instance_name}-us-west2-a" },
    { region = "us-west3", zone = "us-west3-a", name = "${local.gce_instance_name}-us-west3-a" },
    { region = "us-west4", zone = "us-west4-a", name = "${local.gce_instance_name}-us-west4-a" }
  ]
}
```
```sh versions.tf
terraform {
  required_version = ">= 0.12"
}
provider "google" {
  version = "~> 3.30.0"
}
```

## ÂêÑÁ®Æscript
```sh ping-all-instances-in-VPC.sh
#!/bin/bash

project_name=""
vpc_name="test-network"
ping_count=100
src_host=`hostname`
src_zone=`gcloud compute instances list --filter "NAME=${src_host}" --format="csv(ZONE)" | sed '1d'`

echo ${src_host} at `date +"%Y-%m-%d %H:%M:%S.%3N"`

gce_list=`gcloud compute instances list --filter "networkInterfaces[].network:${vpc_name}" --format="csv(NAME,ZONE,INTERNAL_IP)" | sed '1d'`

for gce in ${gce_list}
do
  dst_host=`echo ${gce} | cut -d ',' -f 1` 
  dst_zone=`echo ${gce} | cut -d ',' -f 2`
  dest_ip=`echo ${gce} | cut -d ',' -f 3`
  rs_ping=`sudo ping -i0.1 ${dest_ip} -c ${ping_count} -q`
  avg=`echo ${rs_ping} | sed -r 's/.*rtt min\/avg\/max\/mdev = (.+?)\/(.+?)\/(.+?)\/(.+?)$/\2/'`

  echo ${src_host},${src_zone},${dst_host},${dst_zone},${dest_ip},${avg}

done
```
```sh sh-exec.sh
#!/bin/bash

echo Started at `date +"%Y-%m-%d %H:%M:%S.%3N"`

project_name=""
vpc_name="test-network"
shell_file="ping-all-instances-in-VPC.sh"

format="csv(NAME,ZONE,INTERNAL_IP)"
gce_list=`gcloud compute instances list --filter "networkInterfaces[].network:${vpc_name}" --format="csv(NAME,ZONE)" | sed '1d'`

for gce in ${gce_list}
do
  host=`echo ${gce} | cut -d ',' -f 1` 
  zone=`echo ${gce} | cut -d ',' -f 2`

  gcloud compute scp ${shell_file} ${host}:~/${shell_file} --zone ${zone} --tunnel-through-iap
  wait
  gcloud compute ssh ${host} --command="sh ~/${shell_file}" --zone ${zone} --tunnel-through-iap
  wait
  gcloud compute ssh ${host} --command="rm ~/${shell_file}" --zone ${zone} --tunnel-through-iap
  wait

done
echo Finished at `date +"%Y-%m-%d %H:%M:%S.%3N"`
```

# ‰Ωø„ÅÑÊñπ
```sh
sh sh-exec.sh
```

